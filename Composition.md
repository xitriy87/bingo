1. **Запуск приожения Bingo**

   С помощью утилиты strace определили, что для запуска приложение требует наличие конфигурационного файла /opt/bingo/config.yaml в yml формате с определенными опциями, формат файла можно определить с помощью запуска bingo ./bingo print_default_config, создали этот файл.
   Далее готовим тестовую БД, в качестве СУБД мы выбираем использовать Postgresql-16, так как в тз нету требований по использованию какой либо конкретной СУБД и мы знаем как настраивать и ксплуатировать эту СУБД.Создаем в СУБД базу данных пользователя bingo с паролем bingo и аттрубитом LOGIN, создаем БД bingo с владельцем bingo.
   Заполняем ее с помощью запуска приложения bingo prepare_db.
   После окончания заполнения быза запускаем ./bingo run_server и ловим ошибку, далее через strace выясняем что для запуска bingo необходимо создать директорию куда будут писаться логи самого приложения.
   Создаем директорию /opt/bongo/logs/359c71e299/

2. **Тюнинг базы данных**

   После запуска приложения необходимо определить какие запросы выполняются к базе данных, что бы была возможность оптимизировать работу БД.
   Включаем в БД логирование SQL-запросов, выставив опцию log_min_duration_statement = 0, теперь выполняя запросы к нашему приложению, мы можем увидить, какие запросы оно делает в БД, что бы мы могли оптимизировать работу СУБД.
   Определив запросы, запускаем их в базе с операторами EXPLAIN ANALYZE, и получаем план запроса, который можно вставить в форму на сайате https://explain.tensor.ru/ и получить рекомендации по оптимизации.
   Выполнив эти действия, мы получили рекомендации на создание индексов. Подробнее можно посмотреть в ansible плайбук playbook-db-tune.yml в репозитории.

3. **Запаковываем приложение в Docker-контейнер**

   Для запуска приложения будем использовать Docker. Создаем Dockerfile, в качестве исходного образа возьмем alpine, так как он является легковесным и подходит нам для запуска приложения. Dockerfile можно посмотреть в репозитории.
   Запускать само приложение будем с помощью docker compose добавление healthcheck по curl на http://localhost:20061/ping, и для того что бы наш контейнер перезапускался, когда его статус становится unhealthy в результате не прохорда проверки,
   добавляем еще один контейнер autoheal, который реализует мезанизм перезапуска контейнера. Методом проб и ошибок, были выбраны подходящие значения для настроек проверок healthcheck, что бы приложение отвечало требования ТЗ по отказоустойчивости.

5. **Проксирование приложения**

   Для доступа к приложению, будем использовать веб-сервер nginx версии 1.25.3 из mainline ветки, так как он поддерживает работу http3
   Настройку для nginx можно посмотреть в ansible роли lb.

6. **Развертывание приложения в yandex cloud**

   С помощью продуктов terraform и ansible, осуществляем развертываение приложения в yandex cloud. Файлы развертывания ресурсов для terraform и роли и плайбуки для ansible можно посмотреть в репозитории. Порядок развертывания описан в файле README.md репозитория.
